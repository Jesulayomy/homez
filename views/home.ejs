<!DOCTYPE html>
<html>
<%- include('chunks/head.ejs') %>
<body>
  <%- include('chunks/navbar.ejs') %>

  <div class="container-fluid p-5 pt-0">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="display-1">All listings</h1>
      <a href="/items/new" class="btn btn-primary">Add a new listing <i class="fa fa-home"></i></a>
    </div>

		<div class="row">
			<% items.forEach(item => { %>
			<div class="col-md-6 col-xl-4 mb-2">
				<div class="card mb-1 h-100">
					<img src="<%= item.imageURL %>" class="card-img-top" alt="<%= item.name %>">
					<div class="card-body pt-1 p-2">
						<h5 class="card-title"><%= item.name %></h5>
						<p class="card-text">
							<%= item.rental ? 'Rental' : 'Outright Purchase' %>
						</p>
						<p class="card-text">Price: $<%= item.price %><%= item.rental ? '/month' : '' %></p>
						<% if (item.owner.equals(user._id)) { %>
							<a href="/items/<%= item._id %>" class="btn btn-outline-success"><i class="fa fa-pencil"></i> Edit</a>
						<% } else { %>
							<a href="/items/<%= item._id %>" class="btn btn-outline-secondary">View</a>
						<% } %>
					</div>
				</div>
			</div>
			<% }) %>
		</div>
  </div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
</body>
</html>
